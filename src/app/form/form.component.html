<section class="topicSec">
  <div><h2>Passenger Information</h2></div>
</section>

<section class="buyForm">

  <div class="formMain">

    <div class="txt">
      <h3>Enter your details</h3> 
    </div>

    <div class="selectedTrain" *ngIf="selectedTrain">
      <div>
        <h3>#{{ selectedTrain.number }}</h3>
      </div>
      <div>
        <span>{{ selectedTrain.from }}</span>
        <span>{{ selectedTrain.departure }}</span>
      </div>
      <div>
        <span>{{ selectedTrain.to }}</span>
        <span>{{ selectedTrain.arrive }}</span>
      </div>
    </div>

    <div class="line"></div>

    <form action="">

      <h2>Contact Information</h2>

      <div class="email">
        <input type="email" placeholder="Enter Your Email">
        <input type="text" placeholder="Enter Your Telephone Number">
      </div>

      <h2>Passenger Information</h2>

      <div class="passengers">
        <div class="passenger" *ngFor="let passenger of passengersArray; let i = index">
          <h4>Passenger {{ i + 1 }}</h4>
          <div class="inputs">
            <div><p>Seat:</p></div>
            <input type="text" [(ngModel)]="passenger.firstName" name="firstName{{i}}" placeholder="First Name">
            <input type="text" [(ngModel)]="passenger.lastName" name="lastName{{i}}" placeholder="Last Name">
            <input type="text" [(ngModel)]="passenger.passportNumber" name="passport{{i}}" placeholder="Passport Number">
            <button (mouseover)="addRipple($event)" (click)="openVagons(i)">Select Your Seat</button>
          </div>
        </div>
      </div>

      <div class="vagons" *ngIf="showVagons" (click)="closeVagons()">
        <div class="chooseVag" (click)="$event.stopPropagation()">
      
          <div class="CloseBtn">
            <button class="close-btn" (click)="closeVagons()">&times;</button>
          </div>
      
          <h3>Choose your vagon</h3>
      
          <div class="allVags">
            <div
              class="vagon"
              *ngFor="let vagon of selectedTrain?.vagons; let i = index"
              [class.selected]="selectedVagonIndex === i"
              (click)="selectVagon(i)"
            >
              <span class="vagon-name">{{ vagon.name }}</span>
              <img [src]="getVagonImage(i)" alt="Wagon">
            </div>
          </div>
      
          <div class="seats" *ngIf="selectedVagonIndex !== null">
            <h4 class="vagon-title">
              Selected Vagon: {{ selectedTrain?.vagons[selectedVagonIndex]?.name }}
            </h4>
            <div class="seat-row" *ngFor="let row of seatRows">
              <div class="seat-block">
                <button
                  class="seat-btn"
                  [ngClass]="{
                    'selected-seat': activePassengerIndex !== null && passengersArray[activePassengerIndex]?.selectedSeat?.vagonIndex === selectedVagonIndex && passengersArray[activePassengerIndex]?.selectedSeat?.seat === (row + 'A'),
                    'taken-seat': isSeatTaken(row + 'A')
                  }"
                  [disabled]="isSeatTaken(row + 'A')"
                  (click)="selectSeat(row + 'A')"
                >
                  {{ row }}A
                </button>
                <button
                  class="seat-btn"
                  [ngClass]="{
                    'selected-seat': activePassengerIndex !== null && passengersArray[activePassengerIndex]?.selectedSeat?.vagonIndex === selectedVagonIndex && passengersArray[activePassengerIndex]?.selectedSeat?.seat === (row + 'B'),
                    'taken-seat': isSeatTaken(row + 'B')
                  }"
                  [disabled]="isSeatTaken(row + 'B')"
                  (click)="selectSeat(row + 'B')"
                >
                  {{ row }}B
                </button>
              </div>
              <div class="seat-block">
                <button
                  class="seat-btn"
                  [ngClass]="{
                    'selected-seat': activePassengerIndex !== null && passengersArray[activePassengerIndex]?.selectedSeat?.vagonIndex === selectedVagonIndex && passengersArray[activePassengerIndex]?.selectedSeat?.seat === (row + 'C'),
                    'taken-seat': isSeatTaken(row + 'C')
                  }"
                  [disabled]="isSeatTaken(row + 'C')"
                  (click)="selectSeat(row + 'C')"
                >
                  {{ row }}C
                </button>
                <button
                  class="seat-btn"
                  [ngClass]="{
                    'selected-seat': activePassengerIndex !== null && passengersArray[activePassengerIndex]?.selectedSeat?.vagonIndex === selectedVagonIndex && passengersArray[activePassengerIndex]?.selectedSeat?.seat === (row + 'D'),
                    'taken-seat': isSeatTaken(row + 'D')
                  }"
                  [disabled]="isSeatTaken(row + 'D')"
                  (click)="selectSeat(row + 'D')"
                >
                  {{ row }}D
                </button>
              </div>
            </div>
          </div>
      
        </div>
      </div>
      
      
      
      
      
    </form>

    <div class="includes">

      <div class="mainIco">
        <div class="secondIco">
          <img src="https://railway.stepprojects.ge/assets/img/svg/pbag1.svg" alt="">
        </div>

        <div class="Txtes">
          <h4>Personal Item</h4>
          <span>Purse, small backpack, briefcase</span>
          <span><img src="https://railway.stepprojects.ge/assets/img/svg/over-check.svg" alt="">Included</span>
        </div>
      </div>

      <div class="mainIco">
        <div class="secondIco">
          <img src="https://railway.stepprojects.ge/assets/img/svg/pbag2.svg" alt="">
        </div>

        <div class="Txtes">
          <h4>Carry-on bag</h4>
          <span>Fits in overhead bin or under the seat</span>
          <span><img src="https://railway.stepprojects.ge/assets/img/svg/over-check.svg" alt="">Included</span>
        </div>
      </div>

      <div class="mainIco">
        <div class="secondIco">
          <img src="https://railway.stepprojects.ge/assets/img/svg/pbag3.svg" alt="">
        </div>

        <div class="Txtes">
          <h4>Checked Bags</h4>
          <span>Larges Bag Purse, small backpack</span>
          <span><img src="https://railway.stepprojects.ge/assets/img/svg/cross.svg" alt=""> Not Included</span>
        </div>
      </div>

    </div>

    <div class="line"></div>

  </div>

</section>

